# CHANGELOG

## 2026-02-28
- Upgraded `bin/qchi` from flat flags to subcommands:
  - `run`
  - `doctor`
  - `lint`
  - `version`
- Kept backward compatibility for legacy invocation:
  - `python3 bin/qchi --mode ... --task ...` maps to `run`
- Enforced mandatory role pipeline in CLI runtime:
  - planner
  - derivation
  - symbolic verifier
  - numeric verifier
  - referee
  - integrator
  - plus source miner for `paper_reproduction`
- Added strict structured JSON role-contract parsing and policy blocking for missing/invalid role evidence.
- Wired `qchi-lint` runtime checks into CLI orchestration and retry feedback loop.
- Hardened Rust report lint to require:
  - Four Horsemen check evidence (units, limits, asymptotics, consistency)
  - symbolic verification status/tool/log evidence
- Updated output templates for lint-compliant validation sections.
- Added CLI usage examples in:
  - `README.md`
  - `docs/INSTALL_AND_USE.md`
  - `docs/HOST_COMMANDS.md`
- Added run-artifact logging for `qchi run`:
  - default path `.qchi/runs/<task_id>/`
  - per-run `roles/`, `attempts/`, and `final/` outputs
  - persisted raw role outputs and parsed JSON role evidence
  - configurable artifact root via `--run-artifacts-dir` or `QCHI_RUN_ARTIFACTS_DIR`
- Added dashboard UI command group to `bin/qchi`:
  - `qchi dashboard build` generates `dashboard/learning_data.json`
  - `qchi dashboard serve` rebuilds and serves the local dashboard at `/dashboard/`
- Upgraded `dashboard/index.html` from minimal scaffold to responsive metrics UI with:
  - global pass-rate cards and parse-error visibility
  - per-project track breakdown (physics/writing/coding-plotting)
  - heuristics summaries and expandable YAML views
- Added dashboard trend chart view for project tracks:
  - metric selector (`run gate %`, `run count`, `eval pass %`, `regression pass %`)
  - rolling time windows (14/30/90 days)
  - multi-line per-track rendering (physics/writing/coding-plotting)
- Updated `scripts/run_learning_dashboard.sh` to call `qchi dashboard serve`.
- Added automatic learning run logging in `qchi run`:
  - appends run records to `skills/qchi/learning/runs.jsonl`
  - optional project-scoped logging via `--project-id` and `--learning-track`
  - optional learning root override via `--learning-dir` or `QCHI_LEARNING_DIR`
- Added project-layout auto-bootstrap when project-scoped learning logging is used.
- Added Python CLI test suite under `tests/test_qchi_cli.py`.
- Made CLI installable as a console entrypoint:
  - added `qchi_cli.py` module
  - kept `bin/qchi` as compatibility wrapper
  - added `pyproject.toml` with `qchi` script entry

## 2026-02-20
- Consolidated on `qchi` as canonical skill and removed deprecated `skills/qchi-top-layer` variant.
- Hardened `KNOWLEDGE_SOURCES_POLICY.md` with license/access gates and source-record template.
- Added LyX policy constraints:
  - no `:` in `.lyx` output by default
  - mandatory labels for equation/figure/table/section
  - mandatory `\ref` usage for internal references
  - direct `.lyx` authoring protocol
- Added local LyX manuals for grounding under `skills/qchi/references/lyx-docs/`.
- Added machine-first learning store:
  - `skills/qchi/learning/runs.jsonl`
  - `skills/qchi/learning/evals.jsonl`
  - `skills/qchi/learning/regressions.jsonl`
  - `skills/qchi/learning/heuristics.yaml`
- Added project-scoped learning layout with required tracks:
  - `physics`
  - `writing`
  - `coding-plotting`
- Added validators and CI gates:
  - `tools/validate_project_learning.py`
  - `tools/run_benchmarks.py`
  - `tools/qchi_lyx_lint.py`
  - `.github/workflows/qchi-lint.yml`
- Added benchmark suite scaffold: `skills/qchi/learning/benchmarks/baseline_v1.json`.
- Added local learning dashboard:
  - `tools/build_learning_dashboard.py`
  - `scripts/run_learning_dashboard.sh`
  - `dashboard/index.html`
- Added installation and host operations docs:
  - `docs/INSTALL_AND_USE.md`
  - `docs/INSTALL_PREREQS.md`
  - `docs/HOST_COMMANDS.md`
- Added bootstrap and helper scripts:
  - `scripts/bootstrap_opencode_ubuntu.sh`
  - `scripts/host_help.sh`
  - `tools/check_env.sh`

## 2026-02-17
- Initialized portable top-layer repo structure.
- Added baseline README and workflow rules.
- Added canonical spec and template placeholders.
- Refactored QCHI to methodology-only skill model (removed non-physics Python tooling from skill package).
